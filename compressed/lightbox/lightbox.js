(function(){var c=window.cashmusic;c.lightbox={injectIframe:function(b){b=c.lightbox.parseVideoURL(b);c.overlay.reveal('<div class="cm-aspect"><iframe src="'+b+'" style="position:absolute;top:0;left:0;width:100%;height:100%;" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>',"cm-media")},parseVideoURL:function(b){var a=!1;-1!==b.toLowerCase().indexOf("youtube.com/watch?v=")?(a=b.replace("watch?v=","embed/"),a=a.replace("http:","https:"),-1<a.indexOf("&")&&(a=
a.substr(0,a.indexOf("&"))),a+="?autoplay=1&autohide=1&rel=0"):-1!==b.toLowerCase().indexOf("vimeo.com/")&&(a=b.replace("www.",""),a=a.replace("vimeo.com/","player.vimeo.com/video/"),a+="?title=1&byline=1&portrait=1&autoplay=1");return a},showGallery:function(b,a,e){var d='<div class="cm-gallery-img" style="background-image:url('+b+');"></div>';a&&(d+='<div class="cm-gallery-caption">'+a+"</div>");c.overlay.reveal(d,"cm-gallery");if(e){a=document.createElement("div");a.className="cm-gallery-prev";
d=document.createElement("div");d.className="cm-gallery-next";c.events.add(a,"click",function(a){a=c.lightbox.objLoop(e,b,"prev");c.lightbox.showGallery(a.i,a.c,e)});c.events.add(d,"click",function(a){a=c.lightbox.objLoop(e,b,"next");c.lightbox.showGallery(a.i,a.c,e)});var g=document.querySelector(".cm-gallery");g.appendChild(a);g.appendChild(d)}},objLoop:function(b,a,c){var d=Object.keys(b),e=d[d.length-1],k=b[d[0]],f=1;"prev"==c&&(e=d[0],k=b[d[d.length-1]],f=-1);if(e==a)return k;for(c=0;c<d.length;c++)if(d[c]==
a)return b[d[c+f]]}};var h=document.querySelectorAll('a[href*="youtube.com/watch?v="],a[href*="vimeo.com"]');0<h.length&&c.overlay.create(function(){for(var b=0;b<h.length;++b)c.events.add(h[b],"click",function(a){400<c.measure.viewport().x&&!a.metaKey&&(a.preventDefault(),c.lightbox.injectIframe(a.currentTarget.href))})});var f=document.querySelectorAll("a.cashmusic.gallery,div.cashmusic.gallery");0<f.length&&c.overlay.create(function(){for(var b=0;b<f.length;++b)if("a"==f[b].tagName.toLowerCase())c.events.add(f[b],
"click",function(a){a.preventDefault();a=!1;var b=this.href;this.hasAttribute("title")&&(a=this.title);c.lightbox.showGallery(b,a)});else{for(var a=f[b].getElementsByTagName("img"),e={},b=0;b<a.length;b++){var d=a[b].src,g=!1;a[b].hasAttribute("title")&&(g=a[b].title);!g&&a[b].hasAttribute("alt")&&(g=a[b].alt);e[a[b].src]={i:d,c:g}}for(d=0;d<a.length;d++)c.events.add(a[d],"click",function(a){a.preventDefault();c.lightbox.showGallery(e[this.src].i,e[this.src].c,e)})}})})();
